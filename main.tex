\documentclass[12pt,p a4paper]{class/ncku_class}

\usepackage{times}
\usepackage{CJKutf8}  %%% ZZZ %%% macro for Chinese/Japanese/Korean processing
\usepackage{CJKnumb} %%% ZZZ %%% for Chinese numbering capability

\usepackage[nospace]{cite}  % for smart citation
\usepackage{geometry}  % for easy margin settings
\usepackage{class/ncku_style} % 自定義nckuee.sty
\usepackage{booktabs}
\usepackage[pdftex]{graphicx}
\newcommand\myworkflow{pdftex}  % set the flag
\usepackage{fancyhdr}  % 借用此套件來擺放浮水印

% 啟動 fancy header/footer 套件
\pagestyle{fancy}
\fancyhead{}  % reset left, central, right header to empty
\fancyfoot[C]{\thepage} %中間 footer 擺放頁碼
\renewcommand{\headrulewidth}{0pt} % header 的直線; 0pt 則無線

% 如果不需要任何浮水印，則請把下列介於 >>> 與 <<< 之間
% 的文字行關掉 (行首加上百分號)
%% 浮水印 >>>
% \input{header/ncku_watermark.tex}
%% <<< 浮水印
% 如需額外的頁楣 (header) 或 footer，請在 header/header_footer.tex 裡依例修改
% 它的預設內容是都關掉，可依需要打開
% \input{header/header_footer.tex}

\usepackage{amsmath} % 各式 AMS 數學功能
\usepackage{amssymb} % 各式 AMS 數學符號
\usepackage{mathrsfs} %草寫體數學符號，在數學模式裡用 \mathscr{E} 得草寫 E
\usepackage{caption}
\usepackage{subcaption}
\usepackage{graphicx} \graphicspath{{images/}}
\usepackage{psfrag} % text replacement in figure
\usepackage{bm}
\usepackage{mathtools}
\usepackage{hyperref}
\hypersetup{
colorlinks,%
citecolor=blue,%
filecolor=blue,%
linkcolor=blue,%
urlcolor=blue%
}

\usepackage{setspace}
\usepackage{array}
\usepackage{threeparttable} % table note
\usepackage{multirow} % newline on the tabular of a table.
\usepackage{multicol}
\usepackage{tabularx}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcolumntype{P}[1]{>{\centering\arraybackslash}p{#1}}

\usepackage{url}
\usepackage[usenames,dvipsnames]{xcolor}
\usepackage{pgf}
\usepackage{tikz}
% \usetikzlibrary{arrows,automata,positioning}
\usetikzlibrary{arrows, shapes}

% How to hightlight python code in lstlisting
% https://tex.stackexchange.com/questions/83882/how-to-highlight-python-syntax-in-latex-listings-lstinputlistings-command
\usepackage{listings} % 程式列表套件
% listing setting
% Default fixed font does not support bold face
\usepackage[utf8]{inputenc}
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{10} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{10}  % for normal

\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}

% Python style for highlighting
\newcommand\pythonstyle{\lstset{
language=Python,
basicstyle=\small\ttfamily\bfseries,
otherkeywords={self},
tabsize=1,
keywordstyle=\ttb\color{deepblue},
emph={__init__, JiebaPreTokenizer, jieba_split, pre_tokenize, JanomePreTokenizer, janome_split},
emphstyle=\ttb\color{deepred},
stringstyle=\ttb\color{deepgreen},
frame=single,
showstringspaces=false,
float=htpb,
% numbers=left,
captionpos=b,
numbersep=5pt,
linewidth=\linewidth,
xleftmargin=0.1\linewidth,
breaklines=true
breakwhitespace=false,
}}

% Python environment
\lstnewenvironment{python}[1][]
{
\pythonstyle
\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
\pythonstyle
\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}

\usepackage{url} % 在文稿中引用網址，可以用 \url{http://www.yzu.edu.tw} 方式

% hyperref 會擾亂 cite.sty 對文獻號碼縮編的排版，所以依據
% http://www.ctan.org/tex-archive/macros/latex/contrib/hyperref/
% 作如下的更動，使得 hyperref 不做文獻號碼的超連結。
\makeatletter
\def\NAT@parse{\typeout{This is a fake Natbib command to fool Hyperref.}}
\makeatother

% hyperlinkable table of contents 章節目錄、圖表超連結
\usepackage{hyperref}
\hypersetup{colorlinks, citecolor=blue,filecolor=blue,linkcolor=blue,urlcolor=blue}

% hyperref跟algorithm衝突，hyperref必須放在algorithm前面
\usepackage{algorithm}
\usepackage{algpseudocode}
\usepackage{enumerate}

\newcommand*{\PH}[1]{\textcolor{brown}{PH: #1}}
\newcommand*{\UL}{\underline{\hspace{1em}}}%  underscore, like \_ but longer and easier to see.
\newcommand*{\variation}{\mbox{バリエーション}}

\begin{document}
\begin{CJK}{UTF8}{bkai}
\ifx\myworkflow\mydvipdfmxflow
	\DeclareGraphicsExtensions{.pdf,.png,.jpg,.eps}
	\DeclareGraphicsRule{.pdf}{eps}{.bb}{}
	\DeclareGraphicsRule{.png}{eps}{.bb}{}
	\DeclareGraphicsRule{.jpg}{eps}{.bb}{}
\fi

% global CJK setting
\CJKindent  %%% ZZZ %%%  段首內縮兩格

% 載入中文名詞的定義：例如，Figure -->「圖」, Chapter -->「第 x 章」
\input{header/ncku_definitions.tex} % 主標題名稱定義 // 摘要 (Abstract), ... 等

\input{frontpages/ncku_frontpages.tex}
\input{body/main.tex}
\input{back/back_reference.tex}

\clearpage % to make sure all CJK characters are processed
\end{CJK}
\end{document}